<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Cairo',sans-serif;}

/* Ø´Ø§Ø´Ø© Ø§Ù„Ø­Ø¸Ø± Ø§Ù„ÙƒØ§Ù…Ù„Ø© */
body{
  background:linear-gradient(135deg, #0a0a0a, #111, #1a1a1a, #222);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  color:white;
  padding:20px;
}

/* Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
.container{
  width:100%;
  max-width:500px;
  text-align:center;
}

/* Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
#loading-screen {
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  padding:40px 30px;
  background:rgba(255,255,255,0.05);
  border-radius:20px;
  backdrop-filter:blur(10px);
  box-shadow:0 10px 30px rgba(0,0,0,0.5);
  border:1px solid rgba(255,255,255,0.1);
}

.spinner {
  width:70px;
  height:70px;
  border:6px solid rgba(255,255,255,0.1);
  border-top-color:#ff4c4c;
  border-radius:50%;
  animation:spin 1s ease-in-out infinite;
  margin-bottom:25px;
}

@keyframes spin {
  to { transform:rotate(360deg); }
}

.loading-text {
  font-size:22px;
  font-weight:700;
  color:white;
  margin-bottom:10px;
}

.loading-subtext {
  font-size:16px;
  opacity:0.7;
  color:#aaa;
}

/* Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ */
#error-message {
  display:none;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  padding:40px 30px;
  background:rgba(255,255,255,0.05);
  border-radius:20px;
  backdrop-filter:blur(10px);
  box-shadow:0 10px 30px rgba(0,0,0,0.5);
  border:1px solid rgba(255,255,255,0.1);
  animation:fadeIn 0.5s ease;
}

@keyframes fadeIn {
  from{opacity:0; transform:translateY(20px);}
  to{opacity:1; transform:translateY(0);}
}

.error-icon {
  font-size:70px;
  color:#ff4c4c;
  margin-bottom:25px;
}

.error-title {
  font-size:28px;
  font-weight:800;
  margin-bottom:15px;
  color:white;
}

.error-description {
  font-size:18px;
  margin-bottom:30px;
  color:#ccc;
  line-height:1.6;
  max-width:400px;
}

.login-btn {
  background:linear-gradient(135deg, #ff4c4c, #ff6b6b);
  color:white;
  border:none;
  padding:15px 35px;
  border-radius:12px;
  font-size:18px;
  font-weight:700;
  cursor:pointer;
  transition:0.3s;
  display:flex;
  align-items:center;
  gap:12px;
}

.login-btn:hover {
  background:linear-gradient(135deg, #ff6b6b, #ff4c4c);
  transform:translateY(-3px);
  box-shadow:0 7px 20px rgba(255,107,107,0.4);
}

/* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
#main-content {
  display:none;
  width:100%;
  max-width:800px;
}

.main-wrapper{
  flex:1;
  display:flex;
  flex-direction:column;
  align-items:center;
  text-align:center;
  padding:30px 10px;
}

header h1{
  font-size:38px;
  font-weight:800;
  margin-bottom:10px;
}

header p{
  font-size:20px;
  opacity:.9;
  margin-bottom:25px;
}

/* Cards */
.cards{
  width:100%;
  max-width:600px;
  display:flex;
  flex-direction:column;
  gap:18px;
}

.card{
  background:rgba(255,255,255,0.07);
  padding:20px;
  border-radius:16px;
  text-align:center;
  backdrop-filter:blur(5px);
  box-shadow:0 6px 18px rgba(0,0,0,0.45);
  transition:0.25s;
  cursor:pointer;
}

.card:hover{
  background:rgba(255,255,255,0.12);
  transform:scale(1.03);
}

.card-title{
  font-size:24px;
  font-weight:800;
  margin-bottom:6px;
}

.card-value{
  font-size:18px;
  margin-bottom:14px;
  opacity:.95;
}

/* Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ */
.logout-btn{
  background:#ff4c4c;
  padding:12px 20px;
  border-radius:12px;
  text-align:center;
  color:white;
  font-weight:800;
  width:100%;
  max-width:600px;
  margin-top:20px;
  cursor:pointer;
  transition:0.2s;
}

.logout-btn:hover{
  background:#ff6b6b;
}

/* Footer */
footer{
  text-align:center;
  opacity:.9;
  font-size:18px;
  padding:15px 10px;
  margin-top:25px;
}
</style>
</head>

<body>

<div class="container">
  
  <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
  <div id="loading-screen">
    <div class="spinner"></div>
    <div class="loading-text">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø¯Ø®ÙˆÙ„...</div>
    <div class="loading-subtext">ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù…Ø³Ø¬Ù„Ø§Ù‹ Ù„Ù„Ø¯Ø®ÙˆÙ„</div>
  </div>
  
  <!-- Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ -->
  <div id="error-message" class="error-message">
    <div class="error-icon">ğŸš«</div>
    <h2 class="error-title">ØºÙŠØ± Ù…ØµØ±Ø­ Ø¨Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
    <p class="error-description">ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹ Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</p>
    <button class="login-btn" onclick="goToLogin()">
      <span>ğŸ‘‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¢Ù†</span>
    </button>
    <div style="margin-top:20px; color:#888; font-size:14px;">
      Ø¥Ø°Ø§ ÙƒÙ†Øª Ù‚Ø¯ Ø³Ø¬Ù„Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø³Ø¨Ù‚Ø§Ù‹ØŒ Ø¬Ø±Ø¨ <a href="javascript:location.reload()" style="color:#4cd964; text-decoration:none;">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„</a>
    </div>
  </div>
  
  <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ (ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ù‚Ù‚) -->
  <div id="main-content" style="display: none;">
    <div class="main-wrapper">

      <header>
        <h1>âš™ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h1>
        <div id="user-info" style="font-size:20px; opacity:.9; margin-bottom:25px;">
          Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…...
        </div>
      </header>

      <!-- CARDS -->
      <div class="cards">

        <div class="card" onclick="goToPage('dashboard-alerts.html')">
          <div class="card-title">ğŸ”” Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</div>
          <div class="card-value">Ø¥Ø¶Ø§ÙØ© â€“ ØªØ¹Ø¯ÙŠÙ„ â€“ Ø­Ø°Ù</div>
        </div>

        <div class="card" onclick="goToPage('dashboard-reasons.html')">
          <div class="card-title">âš¡ Ø¥Ø¯Ø§Ø±Ø© Ø£Ø³Ø¨Ø§Ø¨ Ø§Ù„Ø§Ù†Ù‚Ø·Ø§Ø¹</div>
          <div class="card-value">Ø¹Ø±Ø¶ â€“ ØªØ¹Ø¯ÙŠÙ„ â€“ Ø­Ø°Ù</div>
        </div>

        <div class="card" onclick="goToPage('dashboard-schedule.html')">
          <div class="card-title">ğŸ“… Ø¥Ø¯Ø§Ø±Ø© Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªØ´ØºÙŠÙ„</div>
          <div class="card-value">ØªØ´ØºÙŠÙ„ â€“ Ø§Ù†Ø·ÙØ§Ø¡ â€“ ØªØ­Ø¯ÙŠØ«</div>
        </div>

        <div class="card" onclick="goToPage('dashboard-reports.html')">
          <div class="card-title">ğŸ“¢ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª</div>
          <div class="card-value">Ø§Ù„Ø±Ø¯ â€“ ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø§Ù„Ø© â€“ Ø­Ø°Ù</div>
        </div>

      </div>

      <!-- Logout -->
      <div class="logout-btn" id="logoutBtn">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</div>

      <footer>
        <p>Ù…/Ù…Ø§Ø¬Ø¯ Ù‚Ø§Ø³Ù… Ø­Ø³Ù† Ù…Ø¨Ø§Ø±Ùƒ Ø¨Ù† Ø¹Ù…Ø±Ùˆ</p>
        Â© 2025 â€“ Ù…Ù†ØµØ© ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ø¹ØªÙ‚
      </footer>

    </div>
  </div>
  
</div>

<!-- Supabase SDK -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
// =============================================
// ğŸ”§ Ø¥Ø¹Ø¯Ø§Ø¯ Supabase
// =============================================

const SUPABASE_URL = "https://gxuumjhtutkipvkljjhj.supabase.co";
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd4dXVtamh0dXRraXB2a2xqamhqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU1NTM2MzEsImV4cCI6MjA4MTEyOTYzMX0.rmsSRTQ57cAJ3VAiQMe0mdxEYcERh6zQDep7DN_frFI";

const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

// =============================================
// ğŸ” Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯
// =============================================

// Ù…ÙØ§ØªÙŠØ­ Ø§Ù„ØªØ®Ø²ÙŠÙ†
const AUTH_KEY = 'login1_authenticated';
const TOKEN_KEY = 'login1_auth_token';
const TIMEOUT_KEY = 'login1_timeout';
const USER_KEY = 'login1_user_data';
const SESSION_KEY = 'supabase_session';

// Ù…Ø¯Ø© Ø§Ù„Ø¬Ù„Ø³Ø© (6 Ø³Ø§Ø¹Ø§Øª)
const SESSION_TIMEOUT = 6 * 60 * 60 * 1000;

// =============================================
// ğŸ›¡ï¸ ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
// =============================================

// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© (Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©)
async function checkAuthentication() {
  console.log('ğŸ” Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©...');
  
  // 1. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Supabase Session Ù…Ø¨Ø§Ø´Ø±Ø©
  try {
    const { data, error } = await supabase.auth.getSession();
    if (error) {
      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Supabase session:', error);
    } else if (data.session) {
      console.log('âœ… Supabase session Ù†Ø´Ø·Ø©:', data.session.user.email);
      return {
        authenticated: true,
        user: data.session.user,
        session: data.session,
        source: 'supabase'
      };
    }
  } catch (e) {
    console.log('â„¹ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Supabase session Ù…Ø¨Ø§Ø´Ø±Ø©');
  }
  
  // 2. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† localStorage
  const isAuthenticated = localStorage.getItem(AUTH_KEY);
  
  if (!isAuthenticated || isAuthenticated !== 'true') {
    console.log('âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ØµØ§Ø¯Ù‚Ø© ÙÙŠ localStorage');
    return { authenticated: false, source: 'none' };
  }
  
  // 3. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø©
  const timeout = localStorage.getItem(TIMEOUT_KEY);
  if (!timeout) {
    console.log('âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡');
    return { authenticated: false, source: 'expired' };
  }
  
  const currentTime = new Date().getTime();
  const sessionEndTime = parseInt(timeout);
  
  if (currentTime > sessionEndTime) {
    console.log('âŒ Ø§Ù†ØªÙ‡Øª Ù…Ø¯Ø© Ø§Ù„Ø¬Ù„Ø³Ø©');
    clearSession();
    return { authenticated: false, source: 'expired' };
  }
  
  // 4. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
  const userData = localStorage.getItem(USER_KEY);
  if (!userData) {
    console.log('âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø³ØªØ®Ø¯Ù…');
    return { authenticated: false, source: 'no_user' };
  }
  
  console.log('âœ… Ù…ØµØ§Ø¯Ù‚Ø© ØµØ§Ù„Ø­Ø© (Ù…Ù† localStorage)');
  return {
    authenticated: true,
    user: JSON.parse(userData),
    session: null,
    source: 'localStorage'
  };
}

// ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¬Ù„Ø³Ø©
function clearSession() {
  localStorage.removeItem(AUTH_KEY);
  localStorage.removeItem(TOKEN_KEY);
  localStorage.removeItem(TIMEOUT_KEY);
  localStorage.removeItem(USER_KEY);
  localStorage.removeItem(SESSION_KEY);
  
  supabase.auth.signOut().catch(() => {});
  
  console.log('ğŸ§¹ ØªÙ… ØªÙ†Ø¸ÙŠÙ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ù„Ø³Ø©');
}

// Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„
function goToLogin() {
  clearSession();
  window.location.href = 'login1.html';
}

// Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ ØµÙØ­Ø© Ù…Ø¹ Ø§Ù„ØªØ­Ù‚Ù‚
function goToPage(page) {
  checkAuthentication().then(result => {
    if (result.authenticated) {
      window.location.href = page;
    } else {
      showError();
    }
  });
}

// =============================================
// ğŸ¨ ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø¹Ø±Ø¶
// =============================================

function showLoading() {
  document.getElementById('loading-screen').style.display = 'flex';
  document.getElementById('error-message').style.display = 'none';
  document.getElementById('main-content').style.display = 'none';
}

function showError() {
  document.getElementById('loading-screen').style.display = 'none';
  document.getElementById('error-message').style.display = 'flex';
  document.getElementById('main-content').style.display = 'none';
}

function showContent(userInfo = {}) {
  document.getElementById('loading-screen').style.display = 'none';
  document.getElementById('error-message').style.display = 'none';
  document.getElementById('main-content').style.display = 'block';
  
  // Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
  const userElement = document.getElementById('user-info');
  if (userInfo.email) {
    userElement.innerHTML = `
      <div>Ù…Ø±Ø­Ø¨Ø§Ù‹ <strong style="color:#4cd964">${userInfo.name || userInfo.email}</strong></div>
      <div style="font-size:16px; opacity:0.7; margin-top:5px;">
        Ø§Ù„Ø¨Ø±ÙŠØ¯: ${userInfo.email} | Ø¢Ø®Ø± Ø¯Ø®ÙˆÙ„: ${new Date().toLocaleString('ar-SA')}
      </div>
    `;
  } else {
    userElement.innerHTML = 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø´Ø§Ù…Ù„Ø©';
  }
}

// =============================================
// ğŸš€ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©
// =============================================
document.addEventListener('DOMContentLoaded', async function() {
  console.log('ğŸš€ Ø¨Ø¯Ø¡ ØªØ­Ù…ÙŠÙ„ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…...');
  
  // Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø£ÙˆÙ„Ø§Ù‹
  showLoading();
  
  // ØªØ£Ø®ÙŠØ± Ù„Ù…Ø­Ø§ÙƒØ§Ø© Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ­Ù‚Ù‚
  setTimeout(async () => {
    try {
      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
      const authResult = await checkAuthentication();
      
      if (authResult.authenticated) {
        // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø³Ø¬Ù„Ø§Ù‹ØŒ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø­ØªÙˆÙ‰
        showContent(authResult.user);
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ù„Ø³Ø© Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…Ù† localStorage
        if (authResult.source === 'localStorage' && authResult.user) {
          const newExpiry = new Date().getTime() + SESSION_TIMEOUT;
          localStorage.setItem(TIMEOUT_KEY, newExpiry.toString());
          localStorage.setItem(USER_KEY, JSON.stringify({
            ...authResult.user,
            last_login: new Date().toISOString()
          }));
        }
      } else {
        // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…Ø³Ø¬Ù„Ø§Ù‹ØŒ Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£
        showError();
      }
    } catch (error) {
      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ­Ù‚Ù‚:', error);
      showError();
    }
  }, 1000);
  
  // Ø¥Ø¹Ø¯Ø§Ø¯ Ø­Ø¯Ø« ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
  document.getElementById('logoutBtn').addEventListener('click', function() {
    if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ')) {
      goToLogin();
    }
  });
});

// =============================================
// ğŸ”„ Ø­Ù…Ø§ÙŠØ© Ø¥Ø¶Ø§ÙÙŠØ©
// =============================================

// Ù…Ù†Ø¹ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ù…Ù† Ø§Ù„ÙƒØ§Ø´
window.addEventListener('pageshow', function(event) {
  if (event.persisted) {
    // Ø¥Ø°Ø§ ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ù…Ù† Ø§Ù„ÙƒØ§Ø´ØŒ Ù†Ø¹ÙŠØ¯ Ø§Ù„ØªØ­Ù‚Ù‚
    checkAuthentication().then(result => {
      if (!result.authenticated) {
        goToLogin();
      }
    });
  }
});

// Ø­Ù…Ø§ÙŠØ© Ø¶Ø¯ ØªØºÙŠÙŠØ± URL
history.pushState(null, null, location.href);
window.onpopstate = function () {
  history.go(1);
};

// Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø¯ÙˆØ±ÙŠ ÙƒÙ„ 30 Ø«Ø§Ù†ÙŠØ©
setInterval(async () => {
  const authResult = await checkAuthentication();
  if (!authResult.authenticated) {
    showError();
  }
}, 30000);

// =============================================
// ğŸ“ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù„Ù„ØªØ·ÙˆÙŠØ±
// =============================================
console.log(`
=============================================
ğŸ›¡ï¸ Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯
=============================================
âœ… ÙŠØªØ­Ù‚Ù‚ Ù…Ù†:
1. Supabase Session Ù…Ø¨Ø§Ø´Ø±Ø©
2. localStorage Ù„Ù„Ù…ØµØ§Ø¯Ù‚Ø©
3. ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø©
4. Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…

âŒ ÙŠÙ…Ù†Ø¹:
1. Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ø¨Ø¯ÙˆÙ† ØªØ³Ø¬ÙŠÙ„
2. Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ©
3. Ø§Ù„ØªÙ„Ø§Ø¹Ø¨ Ø¨Ù€ localStorage
4. Ø§Ù„ÙˆØµÙˆÙ„ Ù…Ù† Ø§Ù„ÙƒØ§Ø´

ğŸ”§ Ù„Ø­Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© ÙÙŠ login1.html:
1. ØªØ£ÙƒØ¯ Ù…Ù† Ø­ÙØ¸ AUTH_KEY = 'true'
2. ØªØ£ÙƒØ¯ Ù…Ù† Ø­ÙØ¸ USER_KEY Ù…Ø¹ Ø§Ù„Ø¨Ø±ÙŠØ¯
3. ØªØ£ÙƒØ¯ Ù…Ù† Ø­ÙØ¸ TIMEOUT_KEY Ø¨ØªØ§Ø±ÙŠØ® Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠ
=============================================
`);
</script>

</body>
</html>