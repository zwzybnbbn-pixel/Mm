<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">
<style>
body { font-family:'Cairo',sans-serif; margin:0; padding:0; background:#111; color:white; display:flex; justify-content:center; align-items:center; min-height:100vh; }
.container{ width:100%; max-width:800px; text-align:center; padding:20px; }
.card{ background:rgba(255,255,255,0.07); margin:15px 0; padding:20px; border-radius:16px; cursor:pointer; transition:0.25s; }
.card:hover{ background:rgba(255,255,255,0.12); transform:scale(1.03); }
.logout-btn{ background:#ff4c4c; padding:12px 20px; border-radius:12px; cursor:pointer; margin-top:20px; transition:0.2s; }
.logout-btn:hover{ background:#ff6b6b; }
</style>
</head>
<body>

<div class="container">
  <h1>âš™ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h1>
  <div id="user-info" style="margin-bottom:25px;">Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…...</div>

  <div class="card" onclick="goToPage('dashboard-alerts.html')">ğŸ”” Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</div>
  <div class="card" onclick="goToPage('dashboard-reasons.html')">âš¡ Ø¥Ø¯Ø§Ø±Ø© Ø£Ø³Ø¨Ø§Ø¨ Ø§Ù„Ø§Ù†Ù‚Ø·Ø§Ø¹</div>
  <div class="card" onclick="goToPage('dashboard-schedule.html')">ğŸ“… Ø¥Ø¯Ø§Ø±Ø© Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªØ´ØºÙŠÙ„</div>
  <div class="card" onclick="goToPage('dashboard-reports.html')">ğŸ“¢ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª</div>

  <div class="logout-btn" onclick="logout()">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const SUPABASE_URL = "https://gxuumjhtutkipvkljjhj.supabase.co";
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...";
const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

function goToPage(url){ window.location.href = url; }

async function logout(){
  if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ")){
    await supabase.auth.signOut();
    window.location.href = "login1.html";
  }
}

// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø©
async function checkSession(){
  const { data: { session } } = await supabase.auth.getSession();
  if(!session){
    window.location.href = "login1.html";
    return;
  }
  const user = session.user;
  document.getElementById('user-info').innerHTML = `
    Ù…Ø±Ø­Ø¨Ø§Ù‹ <strong style="color:#4cd964">${user.user_metadata?.name || user.email}</strong><br>
    <span style="opacity:0.7; font-size:16px;">${user.email}</span>
  `;
}

// Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„ØªØºÙŠØ± Ø§Ù„Ø¬Ù„Ø³Ø© (Ù…Ø«Ù„Ø§Ù‹ Ø¥Ø°Ø§ ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Ù†Ø§ÙØ°Ø© Ø£Ø®Ø±Ù‰)
supabase.auth.onAuthStateChange((event, session) => {
  if(!session) window.location.href = "login1.html";
});

document.addEventListener('DOMContentLoaded', checkSession);
</script>
</body>
</html>
