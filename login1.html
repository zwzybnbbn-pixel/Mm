<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ - Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Cairo',sans-serif;}

body{
  background:linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  color:white;
  padding:20px;
}

.login-container{
  width:100%;
  max-width:420px;
  background:rgba(255,255,255,0.08);
  padding:35px 30px;
  border-radius:20px;
  backdrop-filter:blur(15px);
  box-shadow:0 15px 35px rgba(0,0,0,0.5);
  text-align:center;
  border:1px solid rgba(255,255,255,0.1);
  animation:fadeIn .8s ease;
}

@keyframes fadeIn{
  from{opacity:0; transform:translateY(30px);}
  to{opacity:1; transform:translateY(0);}
}

.login-header{
  margin-bottom:30px;
}

.login-header h1{
  font-size:32px;
  margin-bottom:10px;
  font-weight:800;
  background:linear-gradient(90deg, #00b4db, #0083b0);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
}

.login-header p{
  font-size:16px;
  opacity:0.8;
  color:#a0a0c0;
}

.input-group{
  margin-bottom:20px;
  text-align:right;
}

.input-group label{
  display:block;
  margin-bottom:8px;
  font-weight:600;
  color:#e0e0ff;
  font-size:16px;
}

.input-group input{
  width:100%;
  padding:15px 18px;
  background:rgba(255,255,255,0.07);
  border:2px solid rgba(255,255,255,0.1);
  border-radius:12px;
  font-size:17px;
  color:white;
  outline:none;
  transition:all 0.3s ease;
}

.input-group input:focus{
  border-color:#0083b0;
  background:rgba(255,255,255,0.1);
  box-shadow:0 0 0 3px rgba(0, 131, 176, 0.2);
}

.input-group input::placeholder{
  color:rgba(255,255,255,0.4);
}

.login-btn{
  width:100%;
  padding:16px;
  margin-top:25px;
  background:linear-gradient(90deg, #00b4db, #0083b0);
  color:white;
  border:none;
  font-size:20px;
  font-weight:800;
  border-radius:14px;
  cursor:pointer;
  transition:all 0.3s ease;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
}

.login-btn:hover{
  background:linear-gradient(90deg, #0083b0, #006a8e);
  transform:translateY(-3px);
  box-shadow:0 7px 20px rgba(0, 131, 176, 0.4);
}

.login-btn:active{
  transform:translateY(-1px);
}

.message-box{
  margin-top:20px;
  padding:15px;
  border-radius:10px;
  font-size:16px;
  font-weight:600;
  text-align:center;
  transition:all 0.3s ease;
}

.message-box.error{
  background:rgba(255, 86, 86, 0.1);
  color:#ff5656;
  border:1px solid rgba(255, 86, 86, 0.3);
}

.message-box.success{
  background:rgba(86, 255, 118, 0.1);
  color:#56ff76;
  border:1px solid rgba(86, 255, 118, 0.3);
}

.message-box.info{
  background:rgba(86, 176, 255, 0.1);
  color:#56b0ff;
  border:1px solid rgba(86, 176, 255, 0.3);
}

/* Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ø¯Ø®ÙˆÙ„ */
.login-tips{
  margin-top:25px;
  padding:15px;
  background:rgba(0,0,0,0.2);
  border-radius:10px;
  border:1px solid rgba(255,255,255,0.05);
}

.login-tips h4{
  color:#56b0ff;
  margin-bottom:10px;
  font-size:16px;
}

.login-tips ul{
  list-style:none;
  padding-right:20px;
  text-align:right;
}

.login-tips li{
  margin-bottom:8px;
  font-size:14px;
  color:#a0a0c0;
  position:relative;
}

.login-tips li::before{
  content:"â€¢";
  color:#00b4db;
  position:absolute;
  right:-15px;
  font-size:18px;
}

/* Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
#loadingOverlay{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.9);
  display:none;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  z-index:9999;
  backdrop-filter:blur(10px);
}

.spinner{
  width:60px;
  height:60px;
  border:5px solid rgba(255,255,255,0.1);
  border-top-color:#00b4db;
  border-radius:50%;
  animation:spin 1s linear infinite;
  margin-bottom:20px;
}

@keyframes spin{
  to{transform:rotate(360deg);}
}

.loading-text{
  font-size:18px;
  font-weight:600;
  color:white;
}

/* Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù„Ù„Ø¬ÙˆØ§Ù„ */
@media(max-width:480px){
  .login-container{
    padding:25px 20px;
  }
  
  .login-header h1{
    font-size:28px;
  }
  
  .input-group input{
    padding:14px 16px;
    font-size:16px;
  }
  
  .login-btn{
    padding:15px;
    font-size:18px;
  }
}
</style>
</head>

<body>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
<div id="loadingOverlay">
  <div class="spinner"></div>
  <div class="loading-text">Ø¬Ø§Ø±ÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„...</div>
</div>

<!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
<div class="login-container">
  
  <div class="login-header">
    <h1>ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h1>
    <p>Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</p>
  </div>
  
  <div class="input-group">
    <label for="email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
    <input type="email" id="email" placeholder="magedgasem55558@gmail.com">
  </div>
  
  <div class="input-group">
    <label for="password">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
    <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
  </div>
  
  <button class="login-btn" onclick="login()">
    <span>ğŸš€ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</span>
  </button>
  
  <div id="message" class="message-box"></div>
  
  <div class="login-tips">
    <h4>ğŸ’¡ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„:</h4>
    <ul>
      <li>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ: magedgasem55558@gmail.com</li>
      <li>Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø®ØµØµØ© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯</li>
      <li>ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù‚Ø¯ Ù‚Ù…Øª Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ ÙÙŠ Supabase Ù…Ø³Ø¨Ù‚Ø§Ù‹</li>
    </ul>
  </div>
  
</div>

<!-- Supabase SDK -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
// =============================================
// ğŸ”§ Ø¥Ø¹Ø¯Ø§Ø¯ Supabase
// =============================================

// Ø¨ÙŠØ§Ù†Ø§Øª Supabase Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ
const SUPABASE_URL = "https://gxuumjhtutkipvkljjhj.supabase.co";
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd4dXVtamh0dXRraXB2a2xqamhqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU1NTM2MzEsImV4cCI6MjA4MTEyOTYzMX0.rmsSRTQ57cAJ3VAiQMe0mdxEYcERh6zQDep7DN_frFI";

// Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù…ÙŠÙ„ Supabase
const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

// =============================================
// ğŸ¯ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„
// =============================================

// Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
const REQUIRED_EMAIL = "magedgasem55558@gmail.com";

// Ù…ÙØ§ØªÙŠØ­ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ù„Ù„Ø¬Ù„Ø³Ø©
const AUTH_KEY = 'login1_authenticated';
const TOKEN_KEY = 'login1_auth_token';
const TIMEOUT_KEY = 'login1_timeout';
const USER_KEY = 'login1_user_data';

// Ù…Ø¯Ø© ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø¬Ù„Ø³Ø© (6 Ø³Ø§Ø¹Ø§Øª)
const SESSION_TIMEOUT = 6 * 60 * 60 * 1000;

// =============================================
// ğŸ“ ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
// =============================================

// Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø©
function showMessage(text, type = 'info') {
  const messageBox = document.getElementById('message');
  messageBox.textContent = text;
  messageBox.className = 'message-box ' + type;
}

// Ø¥Ø®ÙØ§Ø¡ Ø±Ø³Ø§Ù„Ø©
function clearMessage() {
  const messageBox = document.getElementById('message');
  messageBox.textContent = '';
  messageBox.className = 'message-box';
}

// Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
function showLoading() {
  document.getElementById('loadingOverlay').style.display = 'flex';
}

// Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
function hideLoading() {
  document.getElementById('loadingOverlay').style.display = 'none';
}

// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„
function validateEmail(email) {
  const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return emailPattern.test(email);
}

// =============================================
// ğŸ” ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
// =============================================

// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Supabase
async function login() {
  // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
  const email = document.getElementById('email').value.trim();
  const password = document.getElementById('password').value.trim();
  
  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„ÙØ§Ø±ØºØ©
  if (!email || !password) {
    showMessage('âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„', 'error');
    return;
  }
  
  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„
  if (!validateEmail(email)) {
    showMessage('âŒ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­', 'error');
    return;
  }
  
  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ø¨Ø±ÙŠØ¯ Ù‡Ùˆ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
  if (email !== REQUIRED_EMAIL) {
    showMessage(`âŒ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ†: ${REQUIRED_EMAIL}`, 'error');
    return;
  }
  
  // Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
  showLoading();
  clearMessage();
  
  try {
    // Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø¹ Supabase Auth
    const { data, error } = await supabase.auth.signInWithPassword({
      email: email,
      password: password
    });
    
    if (error) {
      throw error;
    }
    
    // Ø¥Ø°Ø§ Ù†Ø¬Ø­ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    if (data.user && data.session) {
      console.log('âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù†Ø§Ø¬Ø­:', data.user.email);
      
      // Ø¥Ø¹Ø¯Ø§Ø¯ Ø¬Ù„Ø³Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
      setupUserSession(data.user, data.session);
      
      showMessage('âœ”ï¸ ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­! Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­ÙˆÙŠÙ„...', 'success');
      
      // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø¹Ø¯ ØªØ£Ø®ÙŠØ±
      setTimeout(() => {
        window.location.href = 'dashboard2.html';
      }, 1500);
      
    } else {
      throw new Error('Ù„Ù… ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ù„Ø³Ø© ØµØ­ÙŠØ­Ø©');
    }
    
  } catch (error) {
    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„:', error);
    
    // Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£ Ø§Ù„Ù…Ø®ØµØµØ©
    let errorMessage = 'âŒ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­Ø©';
    
    if (error.message.includes('Invalid login credentials')) {
      errorMessage = 'âŒ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©';
    } else if (error.message.includes('Email not confirmed')) {
      errorMessage = 'âŒ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ù… ÙŠØªÙ… ØªØ£ÙƒÙŠØ¯Ù‡';
    } else if (error.message.includes('User not found')) {
      errorMessage = 'âŒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…';
    } else if (error.message.includes('Network')) {
      errorMessage = 'âŒ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª';
    }
    
    showMessage(errorMessage, 'error');
  } finally {
    // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
    hideLoading();
  }
}

// Ø¥Ø¹Ø¯Ø§Ø¯ Ø¬Ù„Ø³Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ localStorage
function setupUserSession(user, session) {
  const currentTime = new Date().getTime();
  const expirationTime = currentTime + SESSION_TIMEOUT;
  
  // ØªÙˆÙ„ÙŠØ¯ ØªÙˆÙƒÙ† Ù„Ù„Ù…ØµØ§Ø¯Ù‚Ø©
  const authToken = 'supa_' + btoa(Date.now().toString()) + '_' + Math.random().toString(36).substr(2);
  
  // Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ù„Ø³Ø©
  localStorage.setItem(AUTH_KEY, 'true');
  localStorage.setItem(TOKEN_KEY, authToken);
  localStorage.setItem(TIMEOUT_KEY, expirationTime.toString());
  localStorage.setItem(USER_KEY, JSON.stringify({
    id: user.id,
    email: user.email,
    name: user.user_metadata?.name || 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…',
    created_at: user.created_at,
    last_login: new Date().toISOString()
  }));
  
  console.log('âœ… ØªÙ… Ø­ÙØ¸ Ø¬Ù„Ø³Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ localStorage');
}

// =============================================
// ğŸ¯ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØµÙØ­Ø©
// =============================================

// ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù„Ù„Ø¥Ø®ØªØµØ§Ø±
document.addEventListener('DOMContentLoaded', function() {
  console.log('ğŸš€ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¬Ø§Ù‡Ø²Ø©');
  
  // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
  document.getElementById('email').value = REQUIRED_EMAIL;
  document.getElementById('email').focus();
  
  // Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø²Ø± Enter
  document.getElementById('password').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      login();
    }
  });
  
  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¬Ù„Ø³Ø© Ù†Ø´Ø·Ø©
  checkExistingSession();
});

// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¬Ù„Ø³Ø© Ù…ÙˆØ¬ÙˆØ¯Ø©
function checkExistingSession() {
  const isAuthenticated = localStorage.getItem(AUTH_KEY);
  const timeout = localStorage.getItem(TIMEOUT_KEY);
  
  if (isAuthenticated === 'true' && timeout) {
    const currentTime = new Date().getTime();
    const sessionEndTime = parseInt(timeout);
    
    if (currentTime < sessionEndTime) {
      // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¬Ù„Ø³Ø© Ø³Ø§Ø±ÙŠØ©ØŒ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù…Ø¨Ø§Ø´Ø±Ø©
      console.log('âœ… Ø¬Ù„Ø³Ø© Ù†Ø´Ø·Ø© Ù…ÙˆØ¬ÙˆØ¯Ø©ØŒ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­ÙˆÙŠÙ„...');
      showMessage('âš¡ Ø¬Ù„Ø³Ø© Ù†Ø´Ø·Ø© Ù…ÙˆØ¬ÙˆØ¯Ø©ØŒ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­ÙˆÙŠÙ„...', 'info');
      
      setTimeout(() => {
        window.location.href = 'dashboard2.html';
      }, 1000);
    } else {
      // Ø¥Ø°Ø§ Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¬Ù„Ø³Ø©ØŒ ØªÙ†Ø¸ÙŠÙ
      console.log('â° Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©');
      localStorage.removeItem(AUTH_KEY);
      localStorage.removeItem(TIMEOUT_KEY);
    }
  }
}

// =============================================
// ğŸ“± ÙˆØ¸Ø§Ø¦Ù Ø¥Ø¶Ø§ÙÙŠØ©
// =============================================

// ÙˆØ¸ÙŠÙØ© Ù„Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹)
async function resetPassword() {
  const email = document.getElementById('email').value.trim();
  
  if (!email || !validateEmail(email)) {
    showMessage('âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ­ÙŠØ­', 'error');
    return;
  }
  
  showLoading();
  
  try {
    const { error } = await supabase.auth.resetPasswordForEmail(email, {
      redirectTo: window.location.origin + '/reset-password.html',
    });
    
    if (error) throw error;
    
    showMessage('ğŸ“§ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¥Ù„Ù‰ Ø¨Ø±ÙŠØ¯Ùƒ', 'success');
  } catch (error) {
    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:', error);
    showMessage('âŒ ÙØ´Ù„ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†', 'error');
  } finally {
    hideLoading();
  }
}
// ÙÙŠ login1.htmlØŒ Ø¯Ø§Ø®Ù„ Ø¯Ø§Ù„Ø© login() Ø¨Ø¹Ø¯ Ù†Ø¬Ø§Ø­ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
// Ø£Ø¶Ù Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ ÙÙŠ Ø§Ù„Ù‚Ø³Ù… try Ø¨Ø¹Ø¯ if (data.user && data.session):

// âš¡ Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ù„Ø³Ø© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­
const currentTime = new Date().getTime();
const expirationTime = currentTime + (6 * 60 * 60 * 1000); // 6 Ø³Ø§Ø¹Ø§Øª

// Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (ÙŠØ¬Ø¨ Ø£Ù† ØªØªØ·Ø§Ø¨Ù‚ Ù…Ø¹ dashboard2.html)
localStorage.setItem('login1_authenticated', 'true');
localStorage.setItem('login1_auth_token', data.session.access_token);
localStorage.setItem('login1_timeout', expirationTime.toString());
localStorage.setItem('login1_user_data', JSON.stringify({
  id: data.user.id,
  email: data.user.email,
  name: data.user.user_metadata?.name || data.user.email.split('@')[0],
  last_login: new Date().toISOString()
}));

// Ø­ÙØ¸ Ø¬Ù„Ø³Ø© Supabase Ù„Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ
localStorage.setItem('supabase_session', JSON.stringify(data.session));

console.log('âœ… ØªÙ… Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ù„Ø³Ø© ÙÙŠ localStorage');
console.log('ğŸ”‘ Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©:', Object.keys(localStorage).filter(k => k.includes('login1')));
// =============================================
// ğŸ“ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù„Ù„Ù…Ø·ÙˆØ±
// =============================================
console.log(`
=============================================
ğŸ” Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
=============================================
Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: ${REQUIRED_EMAIL}
Supabase URL: ${SUPABASE_URL}
=============================================
Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù†Ø§Ø¬Ø­ØŒ ÙŠØ¬Ø¨ Ø£Ù†:
1. ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ ÙÙŠ Supabase Auth
2. Ø§Ù„Ø¨Ø±ÙŠØ¯: ${REQUIRED_EMAIL}
3. ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: (ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„Ù‡Ø§ ÙŠØ¯ÙˆÙŠØ§Ù‹)
=============================================
`);
</script>

</body>
</html>